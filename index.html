---
layout: default
---

<div class="home">
	{% if page.title %}
	<h1 class="page-heading">{{ page.title }}</h1>
	{% endif %}

	<p>Hi! We’re VacFind! Our goal is to make COVID-19 vaccinations as easy and accessible as possible.</p>
	
	<p>Once we’re up and running, this site will let you search for your location anywhere in the US and tell you the locations of the nearest places in your area that have COVID vaccines available and whether or not you’re eligible.</p>
	
	<p>We’re moving as fast as we can, but the task isn’t easy. We’re still building a lot of important functionality. In the meantime, we recommend you check out the following sites that tell you vaccine locations for each region:</p>

	<div id="link-list"></div>


	<p>We are entirely volunteer-run and all our code is open source. If you want to help out, shoot us <a href="mailto:{{site.email}}">an email</a>!</p>

	<script>
		var Airtable = require('airtable');

		let linkListElement = document.getElementById("link-list");
		linkListElement.innerText = "Loading..."


		// Get a base ID and use a read-only API key
		var base = new Airtable({ apiKey: 'keyyCSADD61J0D4wQ' }).base('appGzEQkD3QySIDvj');
		let groups = {
			"USA": "National (United States)",
			"AL": "Alabama",
			"AK": "Alaska",
			"AS": "American Samoa",
			"AZ": "Arizona",
			"AR": "Arkansas",
			"CA": "California",
			"CO": "Colorado",
			"CT": "Connecticut",
			"DE": "Delaware",
			"DC": "District Of Columbia",
			"FM": "Federated States Of Micronesia",
			"FL": "Florida",
			"GA": "Georgia",
			"GU": "Guam",
			"HI": "Hawaii",
			"ID": "Idaho",
			"IL": "Illinois",
			"IN": "Indiana",
			"IA": "Iowa",
			"KS": "Kansas",
			"KY": "Kentucky",
			"LA": "Louisiana",
			"ME": "Maine",
			"MH": "Marshall Islands",
			"MD": "Maryland",
			"MA": "Massachusetts",
			"MI": "Michigan",
			"MN": "Minnesota",
			"MS": "Mississippi",
			"MO": "Missouri",
			"MT": "Montana",
			"NE": "Nebraska",
			"NV": "Nevada",
			"NH": "New Hampshire",
			"NJ": "New Jersey",
			"NM": "New Mexico",
			"NY": "New York",
			"NC": "North Carolina",
			"ND": "North Dakota",
			"MP": "Northern Mariana Islands",
			"OH": "Ohio",
			"OK": "Oklahoma",
			"OR": "Oregon",
			"PW": "Palau",
			"PA": "Pennsylvania",
			"PR": "Puerto Rico",
			"RI": "Rhode Island",
			"SC": "South Carolina",
			"SD": "South Dakota",
			"TN": "Tennessee",
			"TX": "Texas",
			"UT": "Utah",
			"VT": "Vermont",
			"VI": "Virgin Islands",
			"VA": "Virginia",
			"WA": "Washington",
			"WV": "West Virginia",
			"WI": "Wisconsin",
			"WY": "Wyoming",
			"ETC": "Miscellaneous"
		}

		let by_group = {}

		var loadLinks = async () => {

			base('links').select({
				sort: [
					{ field: 'group', direction: 'asc' }
				],
				filterByFormula: "AND(NOT({link_type} = 'data source'), NOT({public} = FALSE()))"
			}).eachPage(function page(records, fetchNextPage) {

				records.forEach(function (record) {
					const url = record.get("url");
					const group = record.get('group');

					let listitem = document.createElement("li");
					let link = document.createElement("a");
					link.innerText = url;
					link.href = url;
					link.dataset.recordId = record.getId();
					listitem.appendChild(link);

					if (!by_group[group]) {
						by_group[group] = []
					}

					by_group[group].push(listitem)
				});

				fetchNextPage();
			}, function done(error) {
				populatePage()
				if (error) {
					console.error(error);
				}
			});
		};
		loadLinks()

		const populatePage = () => {
			linkListElement.innerText = ""

			//create headings for each group
			for (group in groups) {
				if (!by_group[group]) {
					by_group[group] = []
				}

				if (by_group[group].length > 0) {

					let listheading = document.createElement("h3");
					listheading.innerText = groups[group];

					let list = document.createElement("ul");
					list.id = group
					for (let link of by_group[group]) {
						list.appendChild(link)
					}

					linkListElement.appendChild(listheading);
					linkListElement.appendChild(list);
				}
			}
		};
	</script>
</div>